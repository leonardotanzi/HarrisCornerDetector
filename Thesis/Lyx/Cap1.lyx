#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass book
\begin_preamble
%\fancyhf{} 
%\fancyhead[LE,RO]{\bfseries\thepage} 
%\fancyhead[RE]{\bfseries\nouppercase{\leftmark}} 
%\fancyhead[LO]{\bfseries\nouppercase{\rightmark}}
\end_preamble
\use_default_options false
\maintain_unincluded_children false
\language italian
\language_package none
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_math auto
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 12
\spacing double
\use_hyperref false
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 0
\use_package mathtools 1
\use_package mhchem 0
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 3cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 2
\paperpagestyle fancy
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Chapter
Estrazione di spigoli in immagini
\end_layout

\begin_layout Standard
Come già detto, lo scopo di questa tesi è studiare l'estrazione di punti
 notevoli in immagini mediante l'algoritmo di Harris.
 
\begin_inset Float figure
placement h
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/confronto montagne.jpg
	width 70text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Individuazione di punti notevoli in una immagine
\begin_inset CommandInset label
LatexCommand label
name "fig:montagna-1-1"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

Un buon punto notevole è contraddistinto dalle seguenti caratteristiche:
 
\end_layout

\begin_layout Enumerate
ripetibilità: lo stesso punto notevole deve poter essere riconosciuto nella
 stessa immagine in diverse condizioni;
\end_layout

\begin_layout Enumerate
salienza: ogni punto notevole deve avere una descrizione distintiva;
\end_layout

\begin_layout Enumerate
compattezza;
\end_layout

\begin_layout Enumerate
locazione: un punto notevole deve occupare una zona ristretta dell'immagine.
\end_layout

\begin_layout Standard
Si osservi la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:montagna-1-1"

\end_inset

.
 Si sono messe in evidenza due zone dell'immagine.
 Se si dovesse scegliere un candidato punto notevole fra questi due, cioè
 un punto che rispetti le quattro proprietà elencate qua sopra, si sceglierebbe
 senza dubbio il (b).
 Per mettere questo concetto in pratica si osserva ora la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:due chiese-1-1"

\end_inset

.
 Con le frecce rosse sono indicati i punti più facilmente riconoscibili
 in entrambe le immagini, cioè i sopra citati punti notevoli.
 Si nota, inoltre, che i punti notevoli sono spesso gli spigoli in un'immagine,
 per questo d'ora in poi i due termini verranno trattati come sinonimi.
 
\begin_inset Float figure
placement h
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/Schermata 2016-09-16 alle 11.58.39.png
	width 80text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Punti notevoli individuabili da angolazioni differenti 
\begin_inset CommandInset citation
LatexCommand cite
key "Rcollins"

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:due chiese-1-1"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

 Prima di affrontare l'algoritmo nel dettaglio, è necessario spiegare l'idea
 di base: considerando la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Spigolo-generico-1-1"

\end_inset

, si immagina di far scorrere una finestra all'interno dell'immagine e di
 compiere per ogni pixel tanti spostamenti di questa finestra in tutte le
 direzioni.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/corner
	width 40text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Spigolo generico 
\begin_inset CommandInset citation
LatexCommand cite
key "Rcollins"

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "fig:Spigolo-generico-1-1"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

Misurando la variazione di intensità, cioè il valore del livello di grigio
 che va da 0 (nero) a 255 (bianco), per i diversi spostamenti, si può capire
 la natura del pixel considerato, come si può vedere in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:tre shift differenti-1-1"

\end_inset

e come si vedrà meglio in seguito.
 Nella figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:tre shift differenti-1-1"

\end_inset

a, la finestra non legge alcuna variazione di intensità in ogni direzione,
 la zona considerata sarà quindi una zona piatta.
 Nella figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:tre shift differenti-1-1"

\end_inset

b, la finestra legge una significativa variazione di intensità in una sola
 direzione, la zona considerata sarà quindi un bordo.
 Infine, nella figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:tre shift differenti-1-1"

\end_inset

c, la finestra legge una significativa variazione di intensità in tutte
 le direzioni, la zona considerata sarà quindi uno spigolo.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/tre shift della finestra.jpg
	width 70text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Studio di tre zone differenti 
\begin_inset CommandInset citation
LatexCommand cite
key "Rcollins"

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:tre shift differenti-1-1"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

 
\end_layout

\begin_layout Section
Algoritmo di Moravec
\end_layout

\begin_layout Standard
Prima di introdurre l'algoritmo di Harris è necessario soffermarsi su ciò
 da cui Harris e Stephens partirono per formulare la loro deduzione: l'algoritmo
 di Moravec 
\begin_inset CommandInset citation
LatexCommand cite
key "moravec1980obstacle"

\end_inset

.
 Approssimativamente, l'algoritmo considera, all'interno di un'immagine,
 una finestra locale intorno ad un singolo pixel 
\begin_inset Formula $p$
\end_inset

 e studia la variazione dell'intensità nell'intorno di 
\begin_inset Formula $p$
\end_inset

, spostando la finestra considerata nelle otto possibili direzioni rappresentate
 in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Spostamenti-nelle-otto"

\end_inset

, in cui lo spostamento è identificato dalla notazione 
\begin_inset Formula $(u,v)$
\end_inset

 e 
\begin_inset Formula $u,v\epsilon[-1,0,1]$
\end_inset

.
 In particolare, è trascurato lo spostamento 
\begin_inset Formula $(0,0)$
\end_inset

 che è relativo allo spostamento nullo.
 Essendo un angolo, per definizione, un punto caratterizzato da una grossa
 variazione di intensità in ogni direzione in un suo intorno ben definito,
 più alta sarà la variazione più il pixel considerato sarà un buon angolo.
 Questo procedimento viene svolto per tutti i pixel dell'immagine.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/8 spostam.png
	width 40text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tutti i possibili spostamenti nelle otto direzioni.
\begin_inset CommandInset label
LatexCommand label
name "fig:Spostamenti-nelle-otto"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Analiticamente, la differenza di intensità 
\begin_inset Formula $E$
\end_inset

 per uno spostamento 
\begin_inset Formula $(u,v)$
\end_inset

 è data da:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
E(u,v)=\sum_{x,y}w\left(x,y\right)\left[I(x+u,y+v)-I(x,y)\right]^{2}\label{eq:moravec generale}
\end{equation}

\end_inset

Dove 
\begin_inset Formula $\mbox{\ensuremath{w(x,y)}}$
\end_inset

 è la finestra che si prende in considerazione e che si sposta all'interno
 dell'immagine 
\begin_inset Formula 
\[
w(x,y)=\begin{cases}
1 & {\rm all'\,interno}\\
0 & {\rm all'\,esterno}
\end{cases}
\]

\end_inset

 e 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $\sum_{x,y}[I(x+u,y+v)-I(x,y)]$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 è la sommatoria della differenza fra le intensità dei pixel in posizione
 
\begin_inset Formula $(x+u,y+v)$
\end_inset

 , cioè 
\begin_inset Formula $I(x+u,y+v)$
\end_inset

, e le intensità dei pixel in posizione 
\begin_inset Formula $(x,y)$
\end_inset

, cioè 
\begin_inset Formula $I(x,y)$
\end_inset

.
 L'elevamento al quadrato permette di evidenziare al meglio le differenze
 di intensità e di lavorare solo con valori positivi.
 Applicando questo ad un esempio concreto: si ha un immagine 8 pixel di
 larghezza per 8 pixel di altezza, per semplicità composta solo da bianco
 e nero.
 In figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:SFa.-1"

\end_inset

 si può notare l'immagine originale su cui si sta lavorando, in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:SFb.-1"

\end_inset

 si rappresenta questa immagine con 1 (corrispondente al colore bianco)
 e 0 (corrispondente al colore nero), evidenziando i due assi 
\begin_inset Formula $x$
\end_inset

 e 
\begin_inset Formula $y$
\end_inset

.
 Il pixel evidenziato in rosso, chiamato per comodità 
\begin_inset Formula $p$
\end_inset

, è per l'appunto il pixel intorno al quale ci si concentra, e i pixel evidenzia
ti in giallo rappresentano la finestra costruita nell'intorno di 
\begin_inset Formula $p$
\end_inset

 (quindi in questo caso 
\begin_inset Formula $\mbox{\ensuremath{w(x,y)}}$
\end_inset

 è una finestra 3 pixel per 3 pixel con 
\begin_inset Formula $3\leq x\leq5$
\end_inset

 e 
\begin_inset Formula $3\leq y\leq5$
\end_inset

 )
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/dentro bianco.png
	width 45text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Immagine originale.
\begin_inset CommandInset label
LatexCommand label
name "fig:SFa.-1"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/1.png
	width 45text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Immagine rappresentata con 0 e 1.
\begin_inset CommandInset label
LatexCommand label
name "fig:SFb.-1"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

.In Figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Ingrandimanto-della-finestra"

\end_inset

 si può notare inoltre come vengono definiti gli assi 
\begin_inset Formula $u$
\end_inset

 e 
\begin_inset Formula $v$
\end_inset

 che indicano lo spostamento della finestra 
\begin_inset Formula $w(x,y)$
\end_inset

.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/2.png
	width 60text%

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Ingrandimanto della finestra considerata.
\begin_inset CommandInset label
LatexCommand label
name "fig:Ingrandimanto-della-finestra"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

 Una volta compresa l'impostazione della formula 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:moravec generale"

\end_inset

, è necessario calcolare le differenze di intensità per gli otto possibili
 spostamenti della finestra di partenza.
 Nelle righe seguenti, si attua il procedimento per lo spostamento in direzione
 
\begin_inset Formula $(u=1,v=-1)$
\end_inset

.
 Il metodo è lo stesso per qualunque spostamento.
 In figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Finestra part e spost"

\end_inset

 sono rappresentate la finestra di partenza e la finestra spostata di 
\begin_inset Formula $(1,-1)$
\end_inset

.
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/4.png
	width 60text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Finestra considerata in partenza e finestra considerata dopo lo spostamento.
\begin_inset CommandInset label
LatexCommand label
name "fig:Finestra part e spost"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Seguendo il procedimento dettato dalla formula matematica, si calcola la
 differenza di intensità pixel per pixel per le due finestre, e si eleva
 ciascuna differenza al quadrato (nell'esempio in questione inutile, essendo
 un'immagine composta solo da 1 e 0).
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
E(1,-1)=\sum_{{\displaystyle {\scriptstyle x,y}}}w\left(x,y\right)\left[I(x+1,y-1)-I(x,y)\right]^{2}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
E(1,-1)=\sum_{x=3}^{5}\sum_{y=3}^{5}w\left(x,y\right)\left[I(x+1,y-1)-I(x,y)\right]^{2}
\]

\end_inset


\begin_inset Formula 
\begin{eqnarray*}
E(1,-1) & = & \sum_{x=3}^{5}\{[w\left(x,3\right)\left[I(x+1,2)-I(x,2)\right]^{2}+w(x,4)\left[I(x+1,3)-I(x,3\right]^{2}+\\
 &  & +w\left(x,5\right)\left[I(x+1,4)-I(x,5)\right]^{2}\}
\end{eqnarray*}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{eqnarray}
E(1,-1) & = & w(3,3)[I(4,2)-I(3,3)]^{2}+w(3,4)[I(4,3)-I(3,4)]^{2}+\label{eq:calcoli}\\
 &  & +w(3,5)[I(4,4)-I(3,5)]^{2}+w(4,3)[I(5,2)-I(4,3)]^{2}+\nonumber \\
 &  & +w(4,4)[I(5,3)-I(4,4)]^{2}+w(4,5)[I(5,4)-I(4,5)]^{2}+\nonumber \\
 &  & +w(5,3)[I(6,2)-I(5,3)]^{2}+w(5,4)[I(6,3)-I(5,4)]^{2}+\nonumber \\
 &  & +w(5,5)[I(6,4)-I(5,5)]^{2}=4\nonumber \\
\nonumber 
\end{eqnarray}

\end_inset


\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/dentro bianco con I rifo.png
	width 60text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Figura di riferimento per la formula 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:calcoli"

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Figura-di-riferimento"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Il perchè il risultato sia 4 è comprensibile osservando la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Figura-di-riferimento"

\end_inset

, che mette in evidenza i valori delle intensità presenti nella formula
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:calcoli"

\end_inset

 per ogni pixel.
 Successivamente si attua lo stesso procedimento per gli sette spostamento
 rimanenti, come si può vedere in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:8-possibili-spostamenti"

\end_inset

, dove la finestra bordata sono gli otto possibili spostamento della finestra.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/8 shift mor copia.png
	width 60text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Otto possibili spostamenti della finestra di partenza.
\begin_inset CommandInset label
LatexCommand label
name "fig:8-possibili-spostamenti"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Svolgendo lo stesso calcolo visto per 
\begin_inset Formula $E(1,-1)$
\end_inset

, i risultati sono i seguenti:
\end_layout

\begin_layout Itemize
\begin_inset Formula $E(1,-1)=4$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $E(1,0)=2$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $E(1,1)=4$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $E(0,-1)=3$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $E(0,1)=3$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $E(-1,-1)=3$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $E(-1,0)=0$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $E(-1,1)=3$
\end_inset


\end_layout

\begin_layout Standard
Tra questi si sceglie il valore minimo, in questo caso 
\begin_inset Formula $E(-1,0)=0$
\end_inset

, e lo si associa al pixel 
\begin_inset Formula $p$
\end_inset

.
 Già da questo si intuisce che il pixel 
\begin_inset Formula $p$
\end_inset

 preso in considerazione non sarà un buon angolo.
 Ci si sposta poi su un altro pixel e si ripete il tutto.
 Il risultato dell'associamento è rappresentato in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Immaginefinale"

\end_inset

.
 I pixel evidenziati in giallo sono i massimi locali, e corrispondono agli
 angoli dell'immagine di partenza.
 Riassumendo il tutto, l’algoritmo considera, all’interno di un’immagine,
 una finestra locale intorno ad un singolo pixel e studia la variazione
 dell’intensità dei pixel all’interno della finestra spostando questa nelle
 otto possibili direzioni.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/6.png
	width 60text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Immagine con i valori associati ad ogni pixel.
\begin_inset CommandInset label
LatexCommand label
name "fig:Immaginefinale"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

 Una volta fatto questo per tutte le direzioni, associa il valore minimo
 
\begin_inset Formula $x$
\end_inset

 della differenza di intensità pixel per pixel, in modo tale che il numero
 associato a quel pixel indichi che, se si parte da una finestra centrata
 in quel pixel e la si sposta in qualunque direzione, l’intensità dei pixel
 all’interno della finestra varierà al minimo di 
\begin_inset Formula $x$
\end_inset

.
 Più 
\begin_inset Formula $x$
\end_inset

 è alto più il pixel preso in considerazione sarà un ottimo angolo.
 Fatto questo pixel per pixel, si selezionano i massimi (in intorni locali)
 fra i valori ottenuti.
 Questi massimi sono gli angoli dell’immagine studiata.
 Harris e Stephens partirono da questo per formulare il loro metodo.
 
\end_layout

\begin_layout Section
Algoritmo di Harris
\end_layout

\begin_layout Standard
L'algoritmo di Harris e Stephens, introdotto nel 1988, è tutt'ora il mezzo
 più utilizzato per il rilevamento di punti notevoli in immagini 
\begin_inset CommandInset citation
LatexCommand cite
key "HaSt88"

\end_inset

.
 L'idea di partenza per spiegare questo algoritmo è quella di ottimizzare
 l'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:moravec generale"

\end_inset

) che esprime l'operatore di Moravec, discutendo in particolare due migliorament
i introdotti da Harris.
 In primo luogo, l'operatore di Moravec utilizza una finestra binaria e
 rettangolare, che porta ad un risultato impreciso, per cui la posizione
 del punto corrispondente allo spigolo rilevato potrebbe non trovarsi al
 centro della finestra considerata, poichè questa finestra tende a massimizzare
 tutte le possibili strutture presenti all’interno della porzione di immagine,
 senza privilegiare alcun pixel.
 Questo inconveniente può essere facilmente superato grazie all’utilizzo
 di una funzione di peso, che assegna un’importanza maggiore ai pixel centrali,
 come mostrato in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Fin-binaria-e-gaussiana"

\end_inset

.
 Per questo Harris propone l'utilizzo di una finestra gaussiana 
\begin_inset Formula $w(x,y)$
\end_inset

, in modo da evidenziare al meglio le variazioni più caratteristiche.
 La finestra 
\begin_inset Formula $w(x,y)$
\end_inset

 è definita come:
\end_layout

\begin_layout Standard

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english
\begin_inset Formula 
\[
w(x,y)=e^{-\frac{(x^{2}+y^{2})}{2\sigma^{2}}}
\]

\end_inset


\end_layout

\begin_layout Standard
dove 
\begin_inset Formula $\sigma$
\end_inset

 è la varianza ed è solitamente posta pari a 1.
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/Schermata 2016-08-11 alle 23.30.26.png
	width 40text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Finestra binaria e finestra gaussiana.
 
\begin_inset CommandInset citation
LatexCommand cite
key "DuccoFrass"

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Fin-binaria-e-gaussiana"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

In secondo luogo, ricordando che in corrispondenza di angoli si hanno significat
ive variazioni nelle intensità delle immagini, volendo rilevare queste nell'imma
gine 
\begin_inset Formula $I$
\end_inset

 è possibile esprimere la 
\begin_inset Formula $I$
\end_inset

 stessa attraverso il suo sviluppo di Taylor nell'origine dello spostamento,
 per semplicità troncato al primo ordine.
 Questo permette una buona approssimazione della misura.
 Per capire meglio cosa significhi questa approssimazione, è necessario
 osservare la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Differenza-fra-Moravec e harris"

\end_inset

.
 I grafici (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Differenza-fra-Moravec e harris"

\end_inset

a) e (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Differenza-fra-Moravec e harris"

\end_inset

b) sono la rappresentazione tridimensionale di 
\begin_inset Formula $E(u,v)$
\end_inset

 con la formulazione di Moravec, (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Differenza-fra-Moravec e harris"

\end_inset

c) e (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Differenza-fra-Moravec e harris"

\end_inset

d) con la formulazione di Harris.
 I due grafici rappresentano rispettivamente un angolo, (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Differenza-fra-Moravec e harris"

\end_inset

a) e (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Differenza-fra-Moravec e harris"

\end_inset

c), e un bordo, (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Differenza-fra-Moravec e harris"

\end_inset

b) e (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Differenza-fra-Moravec e harris"

\end_inset

d), e dalla figura si può vedere come, sviluppando con Taylor e troncando
 al primo ordine, questi vengano approssimati mantenendo le caratteristiche
 generali immutate.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/confronto moravec harris2.jpg
	width 70text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Effetti dello sviluppo di Taylor.
\begin_inset CommandInset label
LatexCommand label
name "fig:Differenza-fra-Moravec e harris"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

 Lo sviluppo di Taylor troncato al primo ordine per uno spostamento 
\begin_inset Formula $f(x+u,y+v)$
\end_inset

 è definito come:
\begin_inset Formula 
\[
f(x+u,y+v)\approx f(x,y)+uf_{x}(x,y)+vf_{y}(x,y)
\]

\end_inset

Dove 
\begin_inset Formula $f_{x}(x,y)$
\end_inset

 e 
\begin_inset Formula $f_{y}(x,y)$
\end_inset

 sono rispettivamente la derivata in direzione 
\begin_inset Formula $x$
\end_inset

 e in direzione 
\begin_inset Formula $y$
\end_inset

.
 Prima di procedere si vuole descrivere cosa significhi derivare su un insieme
 discreto.
 Nel documento originale, Harris approssima le derivate nelle due direzioni
 con la correlazione fra l'immagine e il vettore 
\begin_inset Formula $\begin{bmatrix}-1 & 0 & 1\end{bmatrix}$
\end_inset

 per la direzione 
\begin_inset Formula $x$
\end_inset

, e il vettore 
\begin_inset Formula $\begin{bmatrix}-1\\
0\\
1
\end{bmatrix}$
\end_inset

 per la direzione 
\begin_inset Formula $y$
\end_inset

.
 Poichè la derivata direzionale di un'immagine deve esprimere quanto l'intensità
 dell'immagine in questione vari in quella direzione, è perfettamente comprensib
ile la soluzione proposta da Harris 
\begin_inset CommandInset citation
LatexCommand cite
key "HaSt88"

\end_inset

.
 Oggigiorno, il metodo più utilizzato per approssimare la derivata su un
 insieme discreto è calcolare la correlazione fra l'immagine di partenza
 e la derivata nelle due direzioni di una gaussiana.
 Il concetto è identico a quello proposto da Harris, ma utilizzando la derivata
 di una gaussiana si ottiene una demarcazione più precisa e accurata.
 Il risultato di queste convoluzioni verrà espresso nei prossimi passaggi
 come 
\begin_inset Formula $I_{x}$
\end_inset

 e 
\begin_inset Formula $I_{y}$
\end_inset

.
 Il concetto appena espresso è piu chiaro guardando la Figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Ix e Iy"

\end_inset

.
\end_layout

\begin_layout Standard
Applicandolo quanto detto all'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:moravec generale"

\end_inset

), quello che otteniamo è:
\begin_inset Formula 
\begin{eqnarray*}
E(u,v) & = & \sum_{x,y}w\left(x,y\right)\left[I(x+u,y+v)-I(x,y)\right]^{2}\\
 & \approx & \sum_{x,y}w\left(x,y\right)\left[I(x,y)+uI_{x}+vI_{y}-I(x,y)\right]^{2}\\
 & = & \sum_{x,y}w\left(x,y\right)\left[uI_{x}+vI_{y}\right]^{2}\\
 & = & \sum_{x,y}w\left(x,y\right)\left[u^{2}I_{x}^{2}+2uvI_{x}I_{y}+v^{2}I_{y}^{2}\right]
\end{eqnarray*}

\end_inset

Svolgendo gli opportuni calcoli, questo è esprimibile in forma matriciale
 come:
\begin_inset Formula 
\begin{equation}
E(u,v)\approx\sum_{x,y}w\left(x,y\right)\begin{bmatrix}u & v\end{bmatrix}\begin{bmatrix}I_{x}^{2} & I_{x}I_{y}\\
I_{x}I_{y} & I_{y}^{2}
\end{bmatrix}\begin{bmatrix}u\\
v
\end{bmatrix}\label{eq:forma matriciale generale}
\end{equation}

\end_inset

L'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:forma matriciale generale"

\end_inset

) può quindi essere scritta come :
\begin_inset Formula 
\begin{equation}
E(u,v)\cong\left[u,v\right]M\begin{bmatrix}u\\
v
\end{bmatrix}\label{eq:forma matriciale ristretta}
\end{equation}

\end_inset

dove 
\begin_inset Formula $M$
\end_inset

 è una matrice 
\begin_inset Formula $2\times2$
\end_inset

 definita come:
\begin_inset Formula 
\begin{eqnarray}
M & = & \sum_{x,y}w\left(x,y\right)\begin{bmatrix}I_{x}^{2} & I_{x}I_{y}\\
I_{x}I_{y} & I_{y}^{2}
\end{bmatrix}\label{eq:matrice M}\\
 & = & \begin{bmatrix}\sum_{x,y}w\left(x,y\right)I_{x}^{2} & \sum_{x,y}w\left(x,y\right)I_{x}I_{y}\\
\sum_{x,y}w\left(x,y\right)I_{x}I_{y} & \sum_{x,y}w\left(x,y\right)I_{y}^{2}
\end{bmatrix}\\
 & \overset{(a)}{=} & \begin{bmatrix}w\left(x,y\right)\otimes I_{x}^{2} & w\left(x,y\right)\otimes I_{x}I_{y}\\
w\left(x,y\right)\otimes I_{x}I_{y} & w\left(x,y\right)\otimes I_{y}^{2}
\end{bmatrix}\\
 & = & w\left(x,y\right)\otimes\begin{bmatrix}I_{x}^{2} & I_{x}I_{y}\\
I_{x}I_{y} & I_{y}^{2}
\end{bmatrix}
\end{eqnarray}

\end_inset


\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/Schermata 2016-05-01 alle 22.14.13.png
	width 70text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Esempi di 
\begin_inset Formula $I_{x}$
\end_inset

 e 
\begin_inset Formula $I_{y}$
\end_inset

.
\begin_inset CommandInset citation
LatexCommand cite
key "Rcollins"

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Ix e Iy"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

Nel passaggio (a) si è sostituita la somma pesata con la convoluzione discreta,
 operazione concettualmente identica.
 Nella matrice 
\begin_inset Formula $M$
\end_inset

 è contenuto tutto il necessario per studiare la natura di un pixel: le
 due immagini, 
\begin_inset Formula $I_{x}$
\end_inset

 e 
\begin_inset Formula $I_{y}$
\end_inset

, elevate al quadrato, in modo da evidenziare al meglio le variazioni di
 intensità, e l'immagine 
\begin_inset Formula $I_{x}I_{y}$
\end_inset

, cioè il prodotto puntuale fra 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $I_{x}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 e 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $I_{y}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
.
 A seconda che il pixel analizzato sia un angolo, un bordo o una zona piatta
 la distribuzione di 
\begin_inset Formula $I_{x}$
\end_inset

 e 
\begin_inset Formula $I_{y}$
\end_inset

 sarà molto diversa, come è possibile osservare in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Distribuzione Ix Iy"

\end_inset

.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/TESI/immagini/Schermata 2016-05-01 alle 22.14.29.png
	width 70text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Distribuzione di 
\begin_inset Formula $I_{x}$
\end_inset

 e 
\begin_inset Formula $I_{y}$
\end_inset

.
\begin_inset CommandInset citation
LatexCommand cite
key "Rcollins"

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Distribuzione Ix Iy"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/TESI/immagini/Schermata 2016-05-01 alle 22.14.36.png
	width 70text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Ellissi associabili alle diverse distrbuzioni di 
\begin_inset Formula $I_{x}$
\end_inset

 e 
\begin_inset Formula $I_{y}$
\end_inset

.
\begin_inset CommandInset citation
LatexCommand cite
key "Rcollins"

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Ellissi su Ix Iy"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Per una zona piatta senza variazioni di intensità, i valori di 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $I_{x}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 e 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $I_{y}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 saranno tutti abbastanza piccoli, non essendoci appunto alcuna variazione
 in entrambe le direzioni.
 Per un angolo i valori di 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $I_{x}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 e 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $I_{y}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 saranno grandi in entrambe le direzioni, infine per un bordo la variazione
 sarà grande in una sola direzione, se il bordo è verticale si avrà una
 forte variazione di 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $I_{x}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
, se il bordo è orizzontale una forte variazione di 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $I_{y}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
.
 Si vuole ora capire come sia possibile ricavare una misura della presenza
 o meno di uno spigolo.
 Si osservi la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Ellissi su Ix Iy"

\end_inset

.
 Ipoteticamente, se si riuscisse a ricavare l'espressione di un'ellisse
 con i valori dei semiassi dipendenti dai valori di 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $I_{x}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 e 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $I_{y}$
\end_inset

,
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 si riuscirebbe ad ottenere una descrizione, invariante alla rotazione,
 della variazione nelle due direzioni.
 Questo è esattamente quello che propone Harris.
 Il problema è ora riuscire a connettere la matrice 
\begin_inset Formula $M$
\end_inset

 con i valori dei semiassi di questa ipotetica ellisse.
 Prima di trasformare nella forma matriciale l'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:moravec generale"

\end_inset

), si era ricavata l'espressione di 
\begin_inset Formula $E(u,v)$
\end_inset

 come:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
E(u,v)\approx\sum_{x,y}w\left(x,y\right)\left[u^{2}I_{x}^{2}+2uvI_{x}I_{y}+v^{2}I_{y}^{2}\right]
\]

\end_inset

La funzione è l'equazione di un paraboloide ellittico.
 A seconda dei valori di 
\begin_inset Formula $I_{x}$
\end_inset

 e 
\begin_inset Formula $I_{y}$
\end_inset

 il paraboloide avrà una forma diversa, come è chiaro in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Quadriche"

\end_inset

.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/Schermata 2016-05-31 alle 12.11.05.png
	width 90text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Quadriche associate ad angoli, bordi e zone piatte.
\begin_inset CommandInset citation
LatexCommand cite
key "Harris_perfetto"

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Quadriche"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Se si pone 
\begin_inset Formula $E(u,v)$
\end_inset

 uguale a una costante è come se si tagliasse il paraboloide con un piano
 trasversale che, indifferentemente dal valore della costante, sarà un'ellisse
 con lo stesso rapporto tra semiasse maggiore e minore.
 Se si immagina di tagliare con piani orizzontali le tre quadriche di figura
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Quadriche"

\end_inset

, si intuisce che si otterranno equazioni di ellissi con valori dei semiassi
 differenti a seconda che sia un zona piatta, di bordo o un angolo.
 Se si riuscisse a trovare una relazione tra 
\begin_inset Formula $M$
\end_inset

 e queste ellissi si otterrebbe una descrizione accurata della natura del
 pixel.
 Essendo 
\begin_inset Formula $M$
\end_inset

 una matrice simmetrica, per il teorema spettrale 
\begin_inset CommandInset citation
LatexCommand cite
key "hawkins1975cauchy"

\end_inset

, 
\begin_inset Formula $M$
\end_inset

 è diagonalizzabile.
 Se la si diagonalizza, partendo dall'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:forma matriciale ristretta"

\end_inset

), non prendendo in considerazione la convoluzione con la finestra gaussiana
 
\begin_inset Formula $w(x,y)$
\end_inset

, in questo momento non necessaria per il concetto che si vuole esprimere,
 si ottiene:
\begin_inset Formula 
\[
M=\begin{bmatrix}e_{1} & e_{2}\end{bmatrix}\begin{bmatrix}\lambda_{1} & 0\\
0 & \lambda_{2}
\end{bmatrix}\begin{bmatrix}e_{1}^{T}\\
e_{2}^{T}
\end{bmatrix}
\]

\end_inset

dove 
\begin_inset Formula $e1$
\end_inset

 e 
\begin_inset Formula $e2$
\end_inset

 sono gli autovettori associati agli autovalori 
\begin_inset Formula $\lambda_{1}$
\end_inset

 e 
\begin_inset Formula $\lambda_{2}$
\end_inset

.
 In questo modo si può visualizzare 
\begin_inset Formula $M$
\end_inset

 come un'ellisse con la lunghezza dei semi-assi determinata dagli autovalori
 e l'orientazione dei semi-assi determinata dagli autovettori.
 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{eqnarray*}
E(u,v) & = & \begin{bmatrix}u & v\end{bmatrix}M\begin{bmatrix}u\\
v
\end{bmatrix}\\
 & \overset{}{=} & \begin{bmatrix}u & v\end{bmatrix}\begin{bmatrix}e_{1} & e_{2}\end{bmatrix}\begin{bmatrix}\lambda_{1} & 0\\
0 & \lambda_{2}
\end{bmatrix}\begin{bmatrix}e_{1}^{T}\\
e_{2}^{T}
\end{bmatrix}\begin{bmatrix}u\\
v
\end{bmatrix}\\
 & \overset{(a)}{=} & \begin{bmatrix}u' & v'\end{bmatrix}\begin{bmatrix}\lambda_{1} & 0\\
0 & \lambda_{2}
\end{bmatrix}\begin{bmatrix}u'\\
v'
\end{bmatrix}\\
 & \overset{(b)}{=} & \lambda_{1}u'^{2}+\lambda_{2}v'^{2}
\end{eqnarray*}

\end_inset

dove nel passaggio (a) si sono definite le nuove coordinate 
\begin_inset Formula $(u',v')$
\end_inset

 che rappresentano le coordinate 
\begin_inset Formula $(u,v$
\end_inset

) nel sistema di coordinate 
\begin_inset Formula $(e_{1},e_{2})$
\end_inset

 .
 La trasformazione è una traslazione, che non influisce in alcun modo sul
 rapporto fra i semiassi delle ellissi ottenute tagliando il piano con un
 piano orizzontale.
 In (b) si sono svolte delle semplice operazioni di moltiplicazione fra
 matrici.
 Supponendo quindi 
\begin_inset Formula $E(u,v)=cost$
\end_inset

 , in modo da tagliare il nostro paraboloide con un piano orizzontale, e
 che 
\begin_inset Formula $(e_{1},\lambda_{1})$
\end_inset

 e 
\begin_inset Formula $(e_{2},\lambda_{2})$
\end_inset

 siano le coppie di autovalori e autovettori della matrice 
\begin_inset Formula $M$
\end_inset

, è possibile esprimere l'equazione ottenuta come:
\begin_inset Formula 
\[
\frac{u'^{2}}{\frac{E(u,v)}{\lambda_{1}}}+\frac{v'^{2}}{\frac{E(u,v)}{\lambda_{2}}}=1
\]

\end_inset


\begin_inset Formula 
\[
\frac{u'^{2}}{\left(\sqrt{\frac{E(u,v)}{\lambda_{1}}}\right)^{2}}+\frac{v'^{2}}{\left(\sqrt{\frac{E(u,v)}{\lambda_{2}}}\right)^{2}}=1
\]

\end_inset


\begin_inset Formula 
\begin{equation}
\frac{u'^{2}}{a^{2}}+\frac{v'^{2}}{b^{2}}=1\label{eq:eq ellisse}
\end{equation}

\end_inset

dove, nell'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:eq ellisse"

\end_inset

), 
\begin_inset Formula $a=\sqrt{\frac{E(u,v)}{\lambda_{1}}}$
\end_inset

 e 
\begin_inset Formula $b=\sqrt{\frac{E(u,v)}{\lambda_{2}}}$
\end_inset

 sono i semiassi dell'ellisse.
 Da questo si intuisce che il semi-asse associato all'autovalore maggiore
 sarà minore di quello associato all'autovalore minore, vigendo una proporzional
ità inversa.
 Ad ogni pixel è quindi associabile una matrice 
\begin_inset Formula $M(x,y)$
\end_inset

 diagonalizzabile, i cui autovalori sono inversamente proporzionali ai valori
 dei semiassi.
 Quindi:
\end_layout

\begin_layout Itemize
una matrice 
\begin_inset Formula $M$
\end_inset

 con un autovalore piccolo e uno grande, rappresenterà un'ellisse schiacciata
 che indicherà una variazione solo nella direzione del semiasse maggiore,
 quindi un bordo in direzione perpendicolare al semiasse maggiore; 
\end_layout

\begin_layout Itemize
una matrice 
\begin_inset Formula $M$
\end_inset

 con entrambi i valori degli autovalori piccoli rappresenterà un'ellisse
 con entrambi i semiassi grandi, quindi poca variazione di intensità in
 entrambe le direzioni, cioè una zona piatta; 
\end_layout

\begin_layout Itemize
una matrice 
\begin_inset Formula $M$
\end_inset

 con entrambi i valori degli autovalori grandi rappresenterà un'ellisse
 con entrambi i semiassi piccoli, quindi molta variazione di intensità in
 entrambe le direzioni, quindi un angolo.
 
\end_layout

\begin_layout Standard
Tutto questo è rappresentato schematicamente in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Tabella-con-autovalori"

\end_inset

, in cui si evidenzia in blu come sarà l'ellisse per i diversi valori dei
 due autovalori.
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/Schermata 2016-05-31 alle 17.48.08.png
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella con autovalori.
\begin_inset CommandInset citation
LatexCommand cite
key "Rcollins"

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Tabella-con-autovalori"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Per capire al meglio tutto questo, si osservino la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Esempi-tridimensionali"

\end_inset

:
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/Schermata 2016-05-31 alle 17.29.49.png
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\end_inset

 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/Schermata 2016-05-31 alle 17.29.55.png
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

 
\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/Schermata 2016-05-31 alle 17.30.00.png
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Esempi di distribuzione di 
\begin_inset Formula $E(u,v)$
\end_inset

.
\begin_inset CommandInset citation
LatexCommand cite
key "Harris_perfetto"

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Esempi-tridimensionali"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

Nella figura (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Esempi-tridimensionali"

\end_inset

a) è rappresentata la quadrica che si potrebbe associare ad un candidato
 angolo (si trovano circonferenze concentriche e non ellissi perchè in questo
 caso gli autovalori sono uguali, quindi un'ellisse con assi uguali è una
 circonferenza).
 Le circonferenze concentriche sono i valori della circonferenza al variare
 di 
\begin_inset Formula $E(u,v)$
\end_inset

.
 Più 
\begin_inset Formula $E(u,v)$
\end_inset

 cresce più il raggio della circonferenza cresce, ma il rapporto tra gli
 autovalori rimane costante.
 Nella figura (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Esempi-tridimensionali"

\end_inset

b) si vede cosa succede di fronte ad un candidato bordo, quindi nella situazione
 in cui un autovalore sia maggiore dell'altro.
 La figura (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Esempi-tridimensionali"

\end_inset

c) infine rappresenta lo stesso paraboloide di figura (
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Esempi-tridimensionali"

\end_inset

b) ma traslato per via degli autovettori associati agli autovettori.
 In questo caso quello che si vuole sottolineare è che nonostante la traslazione
 il rapporto fra i due autovalori rimane lo stesso, a prova che l'operatore
 di Harris è invariante alla rotazione.
 Si è capito quindi come individuare gli angoli in un'immagine 
\begin_inset Formula $I$
\end_inset

.
 Ora è necessario trovare la misura di qualità 
\begin_inset Formula $R$
\end_inset

, per classificare e selezionare i migliori fra i diversi angoli.
 La formulazione proposta da Harris è:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
R=\mathrm{Det}(M)-k\mathrm{Tr}(M)^{2}
\]

\end_inset

dove 
\begin_inset Formula $k$
\end_inset

 è una costante dal valore convenzionale pari a 0.04.
 La scelta di utilizzare determinante e traccia della matrice 
\begin_inset Formula $M$
\end_inset

 è fondamentale, perchè esula la diagonalizzazione di 
\begin_inset Formula $M$
\end_inset

 e l'utilizzo degli autovalori.
 Seguendo questa definizione di 
\begin_inset Formula $R$
\end_inset

, il suo valore sarà negativo nei bordi, positivo e grande negli angoli
 e positivo e piccolo nelle zone piatte.
 A seconda del valore di 
\begin_inset Formula $R$
\end_inset

, il pixel sarà un angolo, un bordo o una zona piatta, come descritto approssima
tivamente in Figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Valori-di-R"

\end_inset

.
 Una volta trovati i pixel con i valori di R maggiori, si sceglie una soglia
 e si selezionano tutti i pixel superiori a quella soglia e che siano massimi
 rispetto agli 8 pixel adiacenti.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/tesi/immagini/Schermata 2016-08-11 alle 23.38.43.png
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Valori di 
\begin_inset Formula $R$
\end_inset

.
\begin_inset CommandInset citation
LatexCommand cite
key "Rcollins"

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Valori-di-R"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Riassumendo e applicandolo alla Figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Figura-di-riferimento"

\end_inset

 come fatto per Moravec, l'algoritmo di Harris si può descrivere attraverso
 i seguenti passaggi 
\begin_inset Foot
status open

\begin_layout Plain Layout
In questo esempio, per comodità, si applicheranno direttamente i concetti
 espressi finora all'intera immagine e non pixel per pixel.
\end_layout

\end_inset

: 
\end_layout

\begin_layout Enumerate
data un'immagine 
\begin_inset Formula $I$
\end_inset

, calcolare le derivate 
\begin_inset Formula $I_{x}$
\end_inset

 e 
\begin_inset Formula $I_{y}$
\end_inset

 nelle due direzioni con 
\begin_inset Formula $I_{x}=I\otimes$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $\begin{bmatrix}-1 & 0 & 1\end{bmatrix}$
\end_inset

 e 
\begin_inset Formula $I_{y}=I\otimes\begin{bmatrix}-1\\
0\\
1
\end{bmatrix}$
\end_inset

 ( figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Ix-e-Iy"

\end_inset

);
\end_layout

\begin_layout Enumerate
calcolare 
\begin_inset Formula $I_{x}^{2}$
\end_inset

, 
\begin_inset Formula $I_{y}^{2}$
\end_inset

 e 
\begin_inset Formula $I_{x}I_{y}$
\end_inset

 (Figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Ix2,Iy2,Ix*Iy"

\end_inset

);
\end_layout

\begin_layout Enumerate
per ciascuna delle tre immagini, calcolare la convoluzione con la finestra
 
\begin_inset Formula $w(x,y)$
\end_inset

 gaussiana (Figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Filtraggio-Ix2,Iy2,IxIy"

\end_inset

);
\end_layout

\begin_layout Enumerate
calcolare 
\begin_inset Formula $R=Det(M)-kTr(M)^{2}=[(I_{x}^{2}*I_{y}^{2})-(I_{x}I_{y})^{2}]-k*(I_{x}+I_{y})$
\end_inset

 , i singoli componenti sono rappresentati in Figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Componenti-di-R"

\end_inset

, il risultato R invece in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:R"

\end_inset

;
\end_layout

\begin_layout Enumerate
sperimentalmente, si trova che valori alti e massimi locali di 
\begin_inset Formula $R$
\end_inset

 indicano la presenza di spigoli, al contrario valori molto negativi di
 R indicano la presenza di bordi.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/Ix.jpg
	width 40text%

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{x}$
\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/Iy.jpg
	width 40text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{y}$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{x}$
\end_inset

 e 
\begin_inset Formula $I_{y}$
\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Ix-e-Iy"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/Ix quadrato.jpg
	width 30text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{x}^{2}$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/Iy quadrato.jpg
	width 30text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{y}^{2}$
\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/IxIy.jpg
	width 30text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{x}I_{y}$
\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{x}^{2}$
\end_inset

, 
\begin_inset Formula $I_{y}^{2}$
\end_inset

 , 
\begin_inset Formula $I_{x}I_{y}$
\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Ix2,Iy2,Ix*Iy"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/Ix_filt.jpg
	width 30text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{x}^{2}$
\end_inset

 filtrata
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/Iy_filt.jpg
	width 30text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{y}^{2}$
\end_inset

 filtrata
\end_layout

\end_inset


\end_layout

\end_inset

 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/IxIy_filt.jpg
	width 30text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{x}I_{y}$
\end_inset

 filtrata
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Filtraggio 
\begin_inset Formula $I_{x}^{2}$
\end_inset

, 
\begin_inset Formula $I_{y}^{2}$
\end_inset

 , 
\begin_inset Formula $I_{x}I_{y}$
\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:Filtraggio-Ix2,Iy2,IxIy"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/a*b.jpg
	width 30text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{x}^{2}*I_{y}^{2}$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/C*C.jpg
	width 30text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $(I_{x}I_{y})2$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/a+b.jpg
	width 30text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $I_{x}+I_{y}$
\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Componenti di R
\begin_inset CommandInset label
LatexCommand label
name "fig:Componenti-di-R"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/metric copy.jpg
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
R
\begin_inset CommandInset label
LatexCommand label
name "fig:R"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Osservando quindi la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:R"

\end_inset

, vediamo che i punti di massimo, messi in evidenza, sono effettivamente
 gli angoli dell'immagine di partenza e, come sottolineato prima, corrispondono
 a pixel con valori di 
\begin_inset Formula $R$
\end_inset

 molto alti.
 
\end_layout

\begin_layout Chapter
Risultati sperimentali
\end_layout

\begin_layout Standard
Finora si è descritta la teoria dell'algoritmo di Harris, in questo capitolo
 si cercherà di migliorare e affinare la precisione di questo algoritmo.
 Come già detto, l'algoritmo di Harris lavora a livello di pixel, associa
 cioè coordinate intere agli spigoli di un'immagine.
 E' possibile usare tecniche di elaborazione delle immagini per affinare
 la precisione ottenuta con l'algoritmo di Harris e individuare le coordinate
 degli spigoli a 
\begin_inset Quotes eld
\end_inset

livello sub-pixel
\begin_inset Quotes erd
\end_inset

, ovvero, identificare delle coordinate frazionarie del punto notevole.
 Tra i numerosi algoritmi per l'identificazione a livello sub-pixel, quello
 implementato da Matlab, il software qui utilizzato per l'analisi, si basa
 sul concetto di 
\begin_inset Quotes eld
\end_inset

curve fitting
\begin_inset Quotes erd
\end_inset

, cioè sull'utilizzo di una quadrica che viene adattata (in inglese 'fitted')
 nei punti nell'intorno del candidato spigolo, il punto di minimo o massimo
 di questa quadrica è lo spigolo a livello sub-pixel 
\begin_inset CommandInset citation
LatexCommand cite
key "fittingmethod"

\end_inset

.
 
\end_layout

\begin_layout Standard
Un altro possibile algoritmo a livello sub-pixel è quello proposto da Z.
 M.
 Liang nel 2006 
\begin_inset CommandInset citation
LatexCommand cite
key "liang2006sub"

\end_inset

 e da noi analizzato.
 Cerchiamo di spiegare il funzionamento di questo algoritmo partendo dallo
 spigolo con coordinate intere trovato dall'algoritmo di Harris, secondo
 il procedimento spiegato nel Capitolo 1, sull'immagine rappresentata in
 figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Spigolo-individuato-da harris"

\end_inset

.
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/corner individuato da harris.jpg
	width 80text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Spigolo individuato dall'algoritmo di Harris.
\begin_inset CommandInset label
LatexCommand label
name "fig:Spigolo-individuato-da harris"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

 Lavoriamo in un intorno di questo punto, 
\begin_inset Formula ${\bf {c}}$
\end_inset

, che verrà definito più avanti.
 Ciascun punto in questo intorno, che chiameremo 
\begin_inset Formula ${\bf {p}}$
\end_inset

, si troverà o su un bordo o su una zona piatta.
 Il punto 
\begin_inset Formula ${\bf {q}}$
\end_inset

, invece, è il nuovo spigolo che troveremo a livello sub-pixel, quindi con
 coordinate non intere e per ora incognite.
 Il prodotto scalare tra due generici vettori 
\begin_inset Formula ${\bf {a}}\cdot{\bf {b}}=0$
\end_inset

 se o 
\begin_inset Formula ${\bf {a}}$
\end_inset

 o 
\begin_inset Formula ${\bf {b}}$
\end_inset

 sono nulli o se i due vettori sono perpendicolari.
 Dato un generico punto 
\begin_inset Formula ${\bf {p}}$
\end_inset

 nell'intorno di 
\begin_inset Formula ${\bf {c}}$
\end_inset

, 
\begin_inset Formula 
\begin{equation}
\nabla{\bf {p}}\cdot({\bf {q}}-{\bf {p}})=0\label{eq:prodotto scalare}
\end{equation}

\end_inset

dove 
\begin_inset Formula $\nabla{\bf {p}}$
\end_inset

 è il gradiente nel punto 
\begin_inset Formula ${\bf {p}}$
\end_inset

 e 
\begin_inset Formula ${\bf {q}}-{\bf {p}}$
\end_inset

 è il vettore differenza tra 
\begin_inset Formula ${\bf {q}}$
\end_inset

 e 
\begin_inset Formula ${\bf {p}}$
\end_inset

.
 Il gradiente in 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula ${\bf {p}}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 è definito come il vettore che ha come componenti le derivate direzionali
 nel punto 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula ${\bf {p}}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
, cioè quelle che, rifacendoci alla notazione utilizzata nel Capitolo 1
 per un'immagine 
\begin_inset Formula $I$
\end_inset

, chiameremmo 
\begin_inset Formula $I_{x}({\bf {p}})$
\end_inset

 e 
\begin_inset Formula $I_{y}({\bf {p}})$
\end_inset

.
 Se 
\begin_inset Formula ${\bf {p}}$
\end_inset

 si trova in una zona piatta come in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Zona-piatta"

\end_inset

,
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/TESI/immagini/subpixel im1.jpg
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Zona piatta
\begin_inset CommandInset label
LatexCommand label
name "fig:Zona-piatta"

\end_inset

.
\begin_inset CommandInset citation
LatexCommand cite
key "subpixel"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

 allora 
\begin_inset Formula $\nabla{\bf {p}}$
\end_inset

 sarà uguale a 
\begin_inset Formula $0$
\end_inset

, e quindi anche il prodotto scalare definito nell'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:prodotto scalare"

\end_inset

) sarà 
\begin_inset Formula $0$
\end_inset

.
 Se invece 
\begin_inset Formula ${\bf {p}}$
\end_inset

 si trova su un bordo come in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Bordo"

\end_inset

,
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Desktop/TESI/immagini/subpixel im2.jpg
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Bordo 
\begin_inset CommandInset citation
LatexCommand cite
key "subpixel"

\end_inset

.
 
\begin_inset CommandInset label
LatexCommand label
name "fig:Bordo"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

 l'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:prodotto scalare"

\end_inset

) risulterà comunque 
\begin_inset Formula $0$
\end_inset

, data la perpendicolarità tra 
\begin_inset Formula $\nabla{\bf {p}}$
\end_inset

 e il vettore differenza 
\begin_inset Formula ${\bf {q}}-{\bf {p}}$
\end_inset

.
 Risolvendo l'equazione per tutti gli 
\begin_inset Formula $n$
\end_inset

 punti selezionati nell'intorno del punto 
\begin_inset Formula ${\bf {c}}$
\end_inset

, si ottiene un sistema a 
\begin_inset Formula $n$
\end_inset

 equazioni da cui è possibile ricavare le coordinate affinate 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula ${\bf {q}}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 dello spigolo.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/finestre e gradienti.jpg
	width 90text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Rappresentazione dei pixel considerati con rispettivo gradiente.
\begin_inset CommandInset label
LatexCommand label
name "fig: finestra e gradienti-1"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

Considerando un numero 
\begin_inset Formula $n$
\end_inset

 di punti, le coordinate di 
\begin_inset Formula ${\bf {q}}$
\end_inset

 si ottengono, a partire dall
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english
'equazione 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:prodotto scalare"

\end_inset

,
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 come segue: 
\begin_inset Formula 
\[
\sum_{n}(\nabla{\bf {p}}_{n}\cdot({\bf {q}}-{\bf {p}}_{n}))=0
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\sum_{n}(\nabla{\bf {p}}_{n}\cdot{\bf {q}})=\sum_{n}(\nabla{\bf {p}}_{n}\cdot{\bf {p}}_{n})
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\sum_{n}(\nabla{\bf {p}}_{n}^{T}\cdot\nabla{\bf {p}}_{n}\cdot{\bf {p}})=\sum_{n}(\nabla{\bf {p}}_{n}^{T}\cdot\nabla{\bf {p}}_{n}\cdot{\bf {p}}_{n})\label{eq: confronto sommatorie}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
{\bf {q}}=\frac{\sum_{n}(\nabla{\bf {p}}_{n}^{T}\cdot\nabla{\bf {p}}_{n}\cdot{\bf {p}}_{n})}{\sum_{n}(\nabla{\bf {p}}_{n}^{T}\cdot\nabla{\bf {p}}_{n})}\label{eq:risolvero q}
\end{equation}

\end_inset

dove nell'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq: confronto sommatorie"

\end_inset

) si sono moltiplicati entrambi i membri per 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula $\nabla{\bf {p}}_{n}^{T}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
, cioè la trasposta del gradiente in 
\begin_inset Formula ${\bf {p}}_{n}$
\end_inset

.
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/miglioramento punto punto.jpg
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Valori provvisori di 
\begin_inset Formula ${\bf {q}}$
\end_inset

.
\begin_inset CommandInset label
LatexCommand label
name "fig:Valori-provvisori-di q-1"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Consideriamo un sistema di assi cartesiani in cui l'origine è in alto a
 sinistra, l'algoritmo di Harris individua lo spigolo nell'immagine rappresentat
a in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Spigolo-individuato-da harris"

\end_inset

 in 
\begin_inset Formula $[173,65]$
\end_inset

, ovvero, 
\begin_inset Formula ${\bf {c}}_{x}=173$
\end_inset

 e 
\begin_inset Formula ${\bf {c}}_{y}=65,$
\end_inset

 come mostrato in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Spigolo-individuato-da harris"

\end_inset

.
 Scegliamo una finestra 
\begin_inset Formula $21\times21$
\end_inset

 nell'intorno di questo spigolo, perciò 
\begin_inset Formula $n=441$
\end_inset

 è il numero di punti che consideriamo.
 Si noti che degli 
\begin_inset Formula $n=441$
\end_inset

 punti dell'intorno uno corrisponde a
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english
 
\begin_inset Formula ${\bf {c}}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
.
 In figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig: finestra e gradienti-1"

\end_inset

 sono rappresentati i 441 pixel e i relativi gradienti, evidenziati da frecce
 blu, nell'intorno della zona in cui si trova lo spigolo.
 L'algoritmo prende in considerazione tutti gli 
\begin_inset Formula $n$
\end_inset

 punti appartenenti all'intorno definito e calcola il valore di 
\begin_inset Formula ${\bf {q}}$
\end_inset

 attraverso l'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:risolvero q"

\end_inset

).
 Prima di arrivare al valore finale di 
\begin_inset Formula ${\bf {q}}$
\end_inset

 l'algoritmo calcola dei valori provvisori di
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english
 
\begin_inset Formula ${\bf {q}}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
.
 L'algoritmo parte dal primo punto preso in considerazione, cioè quello
 in alto a sinistra con coordinate [163,55], evidenziato in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig: finestra e gradienti-1"

\end_inset

.
 Chiamato questo punto 
\begin_inset Formula ${\bf {p}}{}_{[163,55]}$
\end_inset

, si calcolano le coordinate di
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english
 
\begin_inset Formula ${\bf {q}}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 in questo modo:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
{\bf {q}}=\frac{\nabla{\bf {p}}{}_{[163,55]}^{T}\cdot\nabla{\bf {p}}{}_{[163,55]}\cdot{\bf {p}}{}_{[163,55]}}{\nabla{\bf {p}}{}_{[163,55]}^{T}\cdot\nabla{\bf {p}}{}_{[163,55]}}
\]

\end_inset

L'algoritmo passa poi al punto successivo, che per come abbiamo scritto
 il codice è il punto con coordinate [164, 55], e calcola 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang english

\begin_inset Formula ${\bf {q}}$
\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang italian
 come: 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
{\bf {q}}=\frac{\nabla{\bf {p}}{}_{[163,55]}^{T}\cdot\nabla{\bf {p}}{}_{[163,55]}\cdot{\bf {p}}{}_{[163,55]}+\nabla{\bf {p}}{}_{[164,55]}^{T}\cdot\nabla{\bf {p}}{}_{[164,55]}\cdot{\bf {p}}{}_{[164,55]}}{\nabla{\bf {p}}{}_{[163,55]}^{T}\cdot\nabla{\bf {p}}{}_{[163,55]}+\nabla{\bf {p}}{}_{[164,55]}^{T}\cdot\nabla{\bf {p}}{}_{[164,55]}}
\]

\end_inset

Per ogni punto successivo preso in considerazione, la precisione con cui
 viene individuato 
\begin_inset Formula ${\bf {q}}$
\end_inset

 aumenta, fino a trovare il valore finale nelle coordinate 
\begin_inset Formula $[173.83724,64.41271]$
\end_inset

.
 Questo procedimento è più comprensibile in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Valori-provvisori-di q-1"

\end_inset

, dove in magenta sono indicati i valori provvisori di 
\begin_inset Formula ${\bf {q}}$
\end_inset

 all'affinarsi del calcolo.
\end_layout

\begin_layout Standard
In figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Tre-misure-di spigolo"

\end_inset


\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/tre misurazioni differenti.jpg
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tre misure di spigolo individuate.
\begin_inset CommandInset label
LatexCommand label
name "fig:Tre-misure-di spigolo"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

 vengono messe in evidenza tre misure: in verde lo spigolo individuato dall'algo
ritmo di Harris (coordinate 
\begin_inset Formula $[173,65]$
\end_inset

), in rosso quello migliorato con la tecnica di ‘curve fitting’ implementata
 in Matlab (coordinate 
\begin_inset Formula $[173.49514,64.63066]$
\end_inset

) e in blu quello individuato attraverso l'algoritmo analizzato (coordinate
 
\begin_inset Formula $[173.83724,64.41271]$
\end_inset

).
 Si nota quindi un buon miglioramento della misura rispetto al pixel individuato
 dall'algoritmo di Harris.
 In base ai nostri esperimenti, è molto importante il numero di punti considerat
i nell'intorno: un numero eccessivo di punti considerati porterà a una grossa
 perdita di precisione, poichè verrano considerati pixel lontani dallo spigolo
 e quindi fuorvianti nell'identificazione di questo.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/con iterazione.jpg
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Quattro misure di spigolo individuate.
\begin_inset CommandInset label
LatexCommand label
name "fig:Quattro-misure-di spigolo-1"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Introduciamo ora un nuovo concetto.
 Approssimiamo il valore a livello sub-pixel trovato 
\begin_inset Formula $[173.83724,64.41271]$
\end_inset

 con le coordinate intere più vicine, quindi 
\begin_inset Formula $[174,64]$
\end_inset

, e chiamiamo questo punto 
\begin_inset Formula ${\bf {y}}$
\end_inset

.
 Una volta fatto ciò ripetiamo tutto il procedimento considerando queste
 coordinate come se fossero le coordinate di partenza individuate dall'algoritmo
 di Harris.
 Consideriamo quindi i pixel nell'intorno di 
\begin_inset Formula ${\bf {y}}$
\end_inset

 e andiamo a calcolare il nuovo valore di 
\begin_inset Formula ${\bf {q}}$
\end_inset

.
 Si osservi la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Quattro-misure-di spigolo-1"

\end_inset

, dove in bianco è rappresentato il punto 
\begin_inset Formula ${\bf {y}},$
\end_inset

 e in magenta il nuovo spigolo con precisione a livello sub-pixel, con coordinat
e 
\begin_inset Formula $[174.10658,64.14371]$
\end_inset

.
 Siamo quindi riusciti ad affinare ulteriormente il risultato.
 Questo procedimento si può ripetere in modo iterativo, ma si è osservato
 che il valore di 
\begin_inset Formula ${\bf {q}}$
\end_inset

 si assesta quasi sempre dopo una sola iterazione.
\end_layout

\begin_layout Standard
In figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Scacchiera"

\end_inset


\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/scacchiera copy.jpg
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Scacchiera.
\begin_inset CommandInset label
LatexCommand label
name "fig:Scacchiera"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

e nell'ingrandimento in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Zoom-scacchiera-1"

\end_inset

 sono mostrati i risultati ottenuti applicando l'algoritmo ad un'immagine
 diversa.
 Anche in questo caso si può notare un miglioramento grazie all'algoritmo
 di affinamento analizzato.
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/zoom scacchi.jpg
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Ingrandimento scacchiera.
\begin_inset CommandInset label
LatexCommand label
name "fig:Zoom-scacchiera-1"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset

 A volte i risultati peggiorano rispetto all'algoritmo originale di Harris,
 come si può vedere nella stella rappresentata in figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Esempio-di-immagine poco definita"

\end_inset

,
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/stella tesi.jpg
	width 60text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Stella.
\begin_inset CommandInset label
LatexCommand label
name "fig:Esempio-di-immagine poco definita"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

in cui abbiamo utilizzato un'immagine molto 
\begin_inset Quotes eld
\end_inset

sporca
\begin_inset Quotes erd
\end_inset

.
 Se in questa immagine mettiamo in evidenza le due zone evidenziate in rosso,
 otteniamo due risultati differenti.
 Vediamo che in 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Zoom-di-due finestre"

\end_inset

a l'algoritmo analizzato funziona bene, in 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Zoom-di-due finestre"

\end_inset

b invece l'algoritmo sposta le coordinate più lontane dallo spigolo.
 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/stella tesi zoom1.jpg
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\end_inset

 
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename /Users/leonardotanzi/Documents/MATLAB/Harris/stella tesi zoom2.jpg
	width 52text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Ingrandimento di due finestre.
\begin_inset CommandInset label
LatexCommand label
name "fig:Zoom-di-due finestre"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\end_body
\end_document
